{% if application.settings.exposure.type == "http" and (application.settings.exposure.visibility == "public" or application.settings.exposure.visibility == "private") %}
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: "{{ application.component_name }}"
  namespace: "{{ application.application_name }}"
spec:
  parentRefs:
    - name: {{ cluster.gateway.reference.name }}
      namespace: {{ cluster.gateway.reference.namespace }}
  hostnames:
    - {{ application.url }}
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
        - name: "{{ application.component_name }}"
          port: {{ application.settings.exposure.port }}
{% endif %}